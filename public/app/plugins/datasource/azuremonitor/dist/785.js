/*! For license information please see 785.js.LICENSE.txt */
"use strict";(globalThis.webpackChunkgrafana_azure_monitor_datasource=globalThis.webpackChunkgrafana_azure_monitor_datasource||[]).push([[785],{2785:(e,t,n)=>{n.r(t),n.d(t,{getKustoWorker:()=>lt,setupMode:()=>dt});var r,i,o,s,a,c,u,d,l,g,f,h,p,m,v,_,b,k,w,y,C,x,I,S,A,E,L=n(4349);!function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647}(r||(r={})),function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647}(i||(i={})),function(e){e.create=function(e,t){return e===Number.MAX_VALUE&&(e=i.MAX_VALUE),t===Number.MAX_VALUE&&(t=i.MAX_VALUE),{line:e,character:t}},e.is=function(e){var t=e;return ue.objectLiteral(t)&&ue.uinteger(t.line)&&ue.uinteger(t.character)}}(o||(o={})),function(e){e.create=function(e,t,n,r){if(ue.uinteger(e)&&ue.uinteger(t)&&ue.uinteger(n)&&ue.uinteger(r))return{start:o.create(e,t),end:o.create(n,r)};if(o.is(e)&&o.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments["+e+", "+t+", "+n+", "+r+"]")},e.is=function(e){var t=e;return ue.objectLiteral(t)&&o.is(t.start)&&o.is(t.end)}}(s||(s={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){var t=e;return ue.defined(t)&&s.is(t.range)&&(ue.string(t.uri)||ue.undefined(t.uri))}}(a||(a={})),function(e){e.create=function(e,t,n,r){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:r}},e.is=function(e){var t=e;return ue.defined(t)&&s.is(t.targetRange)&&ue.string(t.targetUri)&&(s.is(t.targetSelectionRange)||ue.undefined(t.targetSelectionRange))&&(s.is(t.originSelectionRange)||ue.undefined(t.originSelectionRange))}}(c||(c={})),function(e){e.create=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},e.is=function(e){var t=e;return ue.numberRange(t.red,0,1)&&ue.numberRange(t.green,0,1)&&ue.numberRange(t.blue,0,1)&&ue.numberRange(t.alpha,0,1)}}(u||(u={})),function(e){e.create=function(e,t){return{range:e,color:t}},e.is=function(e){var t=e;return s.is(t.range)&&u.is(t.color)}}(d||(d={})),function(e){e.create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},e.is=function(e){var t=e;return ue.string(t.label)&&(ue.undefined(t.textEdit)||k.is(t))&&(ue.undefined(t.additionalTextEdits)||ue.typedArray(t.additionalTextEdits,k.is))}}(l||(l={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(g||(g={})),function(e){e.create=function(e,t,n,r,i){var o={startLine:e,endLine:t};return ue.defined(n)&&(o.startCharacter=n),ue.defined(r)&&(o.endCharacter=r),ue.defined(i)&&(o.kind=i),o},e.is=function(e){var t=e;return ue.uinteger(t.startLine)&&ue.uinteger(t.startLine)&&(ue.undefined(t.startCharacter)||ue.uinteger(t.startCharacter))&&(ue.undefined(t.endCharacter)||ue.uinteger(t.endCharacter))&&(ue.undefined(t.kind)||ue.string(t.kind))}}(f||(f={})),function(e){e.create=function(e,t){return{location:e,message:t}},e.is=function(e){var t=e;return ue.defined(t)&&a.is(t.location)&&ue.string(t.message)}}(h||(h={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(p||(p={})),function(e){e.Unnecessary=1,e.Deprecated=2}(m||(m={})),function(e){e.is=function(e){var t=e;return null!=t&&ue.string(t.href)}}(v||(v={})),function(e){e.create=function(e,t,n,r,i,o){var s={range:e,message:t};return ue.defined(n)&&(s.severity=n),ue.defined(r)&&(s.code=r),ue.defined(i)&&(s.source=i),ue.defined(o)&&(s.relatedInformation=o),s},e.is=function(e){var t,n=e;return ue.defined(n)&&s.is(n.range)&&ue.string(n.message)&&(ue.number(n.severity)||ue.undefined(n.severity))&&(ue.integer(n.code)||ue.string(n.code)||ue.undefined(n.code))&&(ue.undefined(n.codeDescription)||ue.string(null===(t=n.codeDescription)||void 0===t?void 0:t.href))&&(ue.string(n.source)||ue.undefined(n.source))&&(ue.undefined(n.relatedInformation)||ue.typedArray(n.relatedInformation,h.is))}}(_||(_={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={title:e,command:t};return ue.defined(n)&&n.length>0&&(i.arguments=n),i},e.is=function(e){var t=e;return ue.defined(t)&&ue.string(t.title)&&ue.string(t.command)}}(b||(b={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}},e.is=function(e){var t=e;return ue.objectLiteral(t)&&ue.string(t.newText)&&s.is(t.range)}}(k||(k={})),function(e){e.create=function(e,t,n){var r={label:e};return void 0!==t&&(r.needsConfirmation=t),void 0!==n&&(r.description=n),r},e.is=function(e){var t=e;return void 0!==t&&ue.objectLiteral(t)&&ue.string(t.label)&&(ue.boolean(t.needsConfirmation)||void 0===t.needsConfirmation)&&(ue.string(t.description)||void 0===t.description)}}(w||(w={})),function(e){e.is=function(e){return"string"==typeof e}}(y||(y={})),function(e){e.replace=function(e,t,n){return{range:e,newText:t,annotationId:n}},e.insert=function(e,t,n){return{range:{start:e,end:e},newText:t,annotationId:n}},e.del=function(e,t){return{range:e,newText:"",annotationId:t}},e.is=function(e){var t=e;return k.is(t)&&(w.is(t.annotationId)||y.is(t.annotationId))}}(C||(C={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){var t=e;return ue.defined(t)&&P.is(t.textDocument)&&Array.isArray(t.edits)}}(x||(x={})),function(e){e.create=function(e,t,n){var r={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(r.options=t),void 0!==n&&(r.annotationId=n),r},e.is=function(e){var t=e;return t&&"create"===t.kind&&ue.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||ue.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||ue.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||y.is(t.annotationId))}}(I||(I={})),function(e){e.create=function(e,t,n,r){var i={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(i.options=n),void 0!==r&&(i.annotationId=r),i},e.is=function(e){var t=e;return t&&"rename"===t.kind&&ue.string(t.oldUri)&&ue.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||ue.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||ue.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||y.is(t.annotationId))}}(S||(S={})),function(e){e.create=function(e,t,n){var r={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(r.options=t),void 0!==n&&(r.annotationId=n),r},e.is=function(e){var t=e;return t&&"delete"===t.kind&&ue.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||ue.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||ue.boolean(t.options.ignoreIfNotExists)))&&(void 0===t.annotationId||y.is(t.annotationId))}}(A||(A={})),function(e){e.is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((function(e){return ue.string(e.kind)?I.is(e)||S.is(e)||A.is(e):x.is(e)})))}}(E||(E={}));var T,M,P,D,O,j,F,N,R,V,z,W,U,q,$,K,B,H,Q,X,G,J,Y,Z,ee,te,ne,re,ie,oe,se,ae=function(){function e(e,t){this.edits=e,this.changeAnnotations=t}return e.prototype.insert=function(e,t,n){var r,i;if(void 0===n?r=k.insert(e,t):y.is(n)?(i=n,r=C.insert(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=C.insert(e,t,i)),this.edits.push(r),void 0!==i)return i},e.prototype.replace=function(e,t,n){var r,i;if(void 0===n?r=k.replace(e,t):y.is(n)?(i=n,r=C.replace(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=C.replace(e,t,i)),this.edits.push(r),void 0!==i)return i},e.prototype.delete=function(e,t){var n,r;if(void 0===t?n=k.del(e):y.is(t)?(r=t,n=C.del(e,t)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(t),n=C.del(e,r)),this.edits.push(n),void 0!==r)return r},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e.prototype.assertChangeAnnotations=function(e){if(void 0===e)throw new Error("Text edit change is not configured to manage change annotations.")},e}(),ce=function(){function e(e){this._annotations=void 0===e?Object.create(null):e,this._counter=0,this._size=0}return e.prototype.all=function(){return this._annotations},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.manage=function(e,t){var n;if(y.is(e)?n=e:(n=this.nextId(),t=e),void 0!==this._annotations[n])throw new Error("Id "+n+" is already in use.");if(void 0===t)throw new Error("No annotation provided for id "+n);return this._annotations[n]=t,this._size++,n},e.prototype.nextId=function(){return this._counter++,this._counter.toString()},e}();!function(){function e(e){var t=this;this._textEditChanges=Object.create(null),void 0!==e?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new ce(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach((function(e){if(x.is(e)){var n=new ae(e.edits,t._changeAnnotations);t._textEditChanges[e.textDocument.uri]=n}}))):e.changes&&Object.keys(e.changes).forEach((function(n){var r=new ae(e.changes[n]);t._textEditChanges[n]=r}))):this._workspaceEdit={}}Object.defineProperty(e.prototype,"edit",{get:function(){return this.initDocumentChanges(),void 0!==this._changeAnnotations&&(0===this._changeAnnotations.size?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),e.prototype.getTextEditChange=function(e){if(P.is(e)){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t={uri:e.uri,version:e.version};if(!(r=this._textEditChanges[t.uri])){var n={textDocument:t,edits:i=[]};this._workspaceEdit.documentChanges.push(n),r=new ae(i,this._changeAnnotations),this._textEditChanges[t.uri]=r}return r}if(this.initChanges(),void 0===this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var r;if(!(r=this._textEditChanges[e])){var i=[];this._workspaceEdit.changes[e]=i,r=new ae(i),this._textEditChanges[e]=r}return r},e.prototype.initDocumentChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._changeAnnotations=new ce,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},e.prototype.initChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._workspaceEdit.changes=Object.create(null))},e.prototype.createFile=function(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var r,i,o;if(w.is(t)||y.is(t)?r=t:n=t,void 0===r?i=I.create(e,n):(o=y.is(r)?r:this._changeAnnotations.manage(r),i=I.create(e,n,o)),this._workspaceEdit.documentChanges.push(i),void 0!==o)return o},e.prototype.renameFile=function(e,t,n,r){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var i,o,s;if(w.is(n)||y.is(n)?i=n:r=n,void 0===i?o=S.create(e,t,r):(s=y.is(i)?i:this._changeAnnotations.manage(i),o=S.create(e,t,r,s)),this._workspaceEdit.documentChanges.push(o),void 0!==s)return s},e.prototype.deleteFile=function(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var r,i,o;if(w.is(t)||y.is(t)?r=t:n=t,void 0===r?i=A.create(e,n):(o=y.is(r)?r:this._changeAnnotations.manage(r),i=A.create(e,n,o)),this._workspaceEdit.documentChanges.push(i),void 0!==o)return o}}(),function(e){e.create=function(e){return{uri:e}},e.is=function(e){var t=e;return ue.defined(t)&&ue.string(t.uri)}}(T||(T={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return ue.defined(t)&&ue.string(t.uri)&&ue.integer(t.version)}}(M||(M={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return ue.defined(t)&&ue.string(t.uri)&&(null===t.version||ue.integer(t.version))}}(P||(P={})),function(e){e.create=function(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}},e.is=function(e){var t=e;return ue.defined(t)&&ue.string(t.uri)&&ue.string(t.languageId)&&ue.integer(t.version)&&ue.string(t.text)}}(D||(D={})),function(e){e.PlainText="plaintext",e.Markdown="markdown"}(O||(O={})),function(e){e.is=function(t){var n=t;return n===e.PlainText||n===e.Markdown}}(O||(O={})),function(e){e.is=function(e){var t=e;return ue.objectLiteral(e)&&O.is(t.kind)&&ue.string(t.value)}}(j||(j={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(F||(F={})),function(e){e.PlainText=1,e.Snippet=2}(N||(N={})),function(e){e.Deprecated=1}(R||(R={})),function(e){e.create=function(e,t,n){return{newText:e,insert:t,replace:n}},e.is=function(e){var t=e;return t&&ue.string(t.newText)&&s.is(t.insert)&&s.is(t.replace)}}(V||(V={})),function(e){e.asIs=1,e.adjustIndentation=2}(z||(z={})),function(e){e.create=function(e){return{label:e}}}(W||(W={})),function(e){e.create=function(e,t){return{items:e||[],isIncomplete:!!t}}}(U||(U={})),function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},e.is=function(e){var t=e;return ue.string(t)||ue.objectLiteral(t)&&ue.string(t.language)&&ue.string(t.value)}}(q||(q={})),function(e){e.is=function(e){var t=e;return!!t&&ue.objectLiteral(t)&&(j.is(t.contents)||q.is(t.contents)||ue.typedArray(t.contents,q.is))&&(void 0===e.range||s.is(e.range))}}($||($={})),function(e){e.create=function(e,t){return t?{label:e,documentation:t}:{label:e}}}(K||(K={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={label:e};return ue.defined(t)&&(i.documentation=t),ue.defined(n)?i.parameters=n:i.parameters=[],i}}(B||(B={})),function(e){e.Text=1,e.Read=2,e.Write=3}(H||(H={})),function(e){e.create=function(e,t){var n={range:e};return ue.number(t)&&(n.kind=t),n}}(Q||(Q={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(X||(X={})),function(e){e.Deprecated=1}(G||(G={})),function(e){e.create=function(e,t,n,r,i){var o={name:e,kind:t,location:{uri:r,range:n}};return i&&(o.containerName=i),o}}(J||(J={})),function(e){e.create=function(e,t,n,r,i,o){var s={name:e,detail:t,kind:n,range:r,selectionRange:i};return void 0!==o&&(s.children=o),s},e.is=function(e){var t=e;return t&&ue.string(t.name)&&ue.number(t.kind)&&s.is(t.range)&&s.is(t.selectionRange)&&(void 0===t.detail||ue.string(t.detail))&&(void 0===t.deprecated||ue.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))&&(void 0===t.tags||Array.isArray(t.tags))}}(Y||(Y={})),function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"}(Z||(Z={})),function(e){e.create=function(e,t){var n={diagnostics:e};return null!=t&&(n.only=t),n},e.is=function(e){var t=e;return ue.defined(t)&&ue.typedArray(t.diagnostics,_.is)&&(void 0===t.only||ue.typedArray(t.only,ue.string))}}(ee||(ee={})),function(e){e.create=function(e,t,n){var r={title:e},i=!0;return"string"==typeof t?(i=!1,r.kind=t):b.is(t)?r.command=t:r.edit=t,i&&void 0!==n&&(r.kind=n),r},e.is=function(e){var t=e;return t&&ue.string(t.title)&&(void 0===t.diagnostics||ue.typedArray(t.diagnostics,_.is))&&(void 0===t.kind||ue.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||b.is(t.command))&&(void 0===t.isPreferred||ue.boolean(t.isPreferred))&&(void 0===t.edit||E.is(t.edit))}}(te||(te={})),function(e){e.create=function(e,t){var n={range:e};return ue.defined(t)&&(n.data=t),n},e.is=function(e){var t=e;return ue.defined(t)&&s.is(t.range)&&(ue.undefined(t.command)||b.is(t.command))}}(ne||(ne={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){var t=e;return ue.defined(t)&&ue.uinteger(t.tabSize)&&ue.boolean(t.insertSpaces)}}(re||(re={})),function(e){e.create=function(e,t,n){return{range:e,target:t,data:n}},e.is=function(e){var t=e;return ue.defined(t)&&s.is(t.range)&&(ue.undefined(t.target)||ue.string(t.target))}}(ie||(ie={})),function(e){e.create=function(e,t){return{range:e,parent:t}},e.is=function(t){var n=t;return void 0!==n&&s.is(n.range)&&(void 0===n.parent||e.is(n.parent))}}(oe||(oe={})),function(e){function t(e,n){if(e.length<=1)return e;var r=e.length/2|0,i=e.slice(0,r),o=e.slice(r);t(i,n),t(o,n);for(var s=0,a=0,c=0;s<i.length&&a<o.length;){var u=n(i[s],o[a]);e[c++]=u<=0?i[s++]:o[a++]}for(;s<i.length;)e[c++]=i[s++];for(;a<o.length;)e[c++]=o[a++];return e}e.create=function(e,t,n,r){return new de(e,t,n,r)},e.is=function(e){var t=e;return!!(ue.defined(t)&&ue.string(t.uri)&&(ue.undefined(t.languageId)||ue.string(t.languageId))&&ue.uinteger(t.lineCount)&&ue.func(t.getText)&&ue.func(t.positionAt)&&ue.func(t.offsetAt))},e.applyEdits=function(e,n){for(var r=e.getText(),i=t(n,(function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n})),o=r.length,s=i.length-1;s>=0;s--){var a=i[s],c=e.offsetAt(a.range.start),u=e.offsetAt(a.range.end);if(!(u<=o))throw new Error("Overlapping edit");r=r.substring(0,c)+a.newText+r.substring(u,r.length),o=c}return r}}(se||(se={}));var ue,de=function(){function e(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(void 0===this._lineOffsets){for(var e=[],t=this._content,n=!0,r=0;r<t.length;r++){n&&(e.push(r),n=!1);var i=t.charAt(r);n="\r"===i||"\n"===i,"\r"===i&&r+1<t.length&&"\n"===t.charAt(r+1)&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,r=t.length;if(0===r)return o.create(0,e);for(;n<r;){var i=Math.floor((n+r)/2);t[i]>e?r=i:n=i+1}var s=n-1;return o.create(s,e-t[s])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e}();!function(e){var t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.numberRange=function(e,n,r){return"[object Number]"===t.call(e)&&n<=e&&e<=r},e.integer=function(e){return"[object Number]"===t.call(e)&&-2147483648<=e&&e<=2147483647},e.uinteger=function(e){return"[object Number]"===t.call(e)&&0<=e&&e<=2147483647},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(ue||(ue={}));const le=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},ge="object"==typeof global&&global&&global.Object===Object&&global;var fe="object"==typeof self&&self&&self.Object===Object&&self;const he=ge||fe||Function("return this")(),pe=function(){return he.Date.now()};var me=/\s/;var ve=/^\s+/;const _e=function(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&me.test(e.charAt(t)););return t}(e)+1).replace(ve,""):e},be=he.Symbol;var ke=Object.prototype,we=ke.hasOwnProperty,ye=ke.toString,Ce=be?be.toStringTag:void 0;var xe=Object.prototype.toString;var Ie=be?be.toStringTag:void 0;const Se=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Ie&&Ie in Object(e)?function(e){var t=we.call(e,Ce),n=e[Ce];try{e[Ce]=void 0;var r=!0}catch(e){}var i=ye.call(e);return r&&(t?e[Ce]=n:delete e[Ce]),i}(e):function(e){return xe.call(e)}(e)};var Ae=/^[-+]0x[0-9a-f]+$/i,Ee=/^0b[01]+$/i,Le=/^0o[0-7]+$/i,Te=parseInt;const Me=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return null!=e&&"object"==typeof e}(e)&&"[object Symbol]"==Se(e)}(e))return NaN;if(le(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=le(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=_e(e);var n=Ee.test(e);return n||Le.test(e)?Te(e.slice(2),n?2:8):Ae.test(e)?NaN:+e};var Pe=Math.max,De=Math.min;const Oe=function(e,t,n){var r,i,o,s,a,c,u=0,d=!1,l=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=r,o=i;return r=i=void 0,u=t,s=e.apply(o,n)}function h(e){var n=e-c;return void 0===c||n>=t||n<0||l&&e-u>=o}function p(){var e=pe();if(h(e))return m(e);a=setTimeout(p,function(e){var n=t-(e-c);return l?De(n,o-(e-u)):n}(e))}function m(e){return a=void 0,g&&r?f(e):(r=i=void 0,s)}function v(){var e=pe(),n=h(e);if(r=arguments,i=this,c=e,n){if(void 0===a)return function(e){return u=e,a=setTimeout(p,t),d?f(e):s}(c);if(l)return clearTimeout(a),a=setTimeout(p,t),f(c)}return void 0===a&&(a=setTimeout(p,t)),s}return t=Me(t)||0,le(n)&&(d=!!n.leading,o=(l="maxWait"in n)?Pe(Me(n.maxWait)||0,t):o,g="trailing"in n?!!n.trailing:g),v.cancel=function(){void 0!==a&&clearTimeout(a),u=0,r=c=i=a=void 0},v.flush=function(){return void 0===a?s:m(pe())},v};class je{constructor(e,t){this._monacoInstance=e,this._defaults=t,this._worker=null,this._idleCheckInterval=self.setInterval((()=>this._checkIfIdle()),3e4),this._lastUsedTime=0,this._configChangeListener=this._defaults.onDidChange((()=>this._saveStateAndStopWorker()))}_stopWorker(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null}_saveStateAndStopWorker(){this._worker&&this._worker.getProxy().then((e=>{e.getSchema().then((e=>{this._storedState={schema:e},this._stopWorker()}))}))}dispose(){clearInterval(this._idleCheckInterval),this._configChangeListener.dispose(),this._stopWorker()}_checkIfIdle(){if(!this._worker)return;const e=this._defaults.getWorkerMaxIdleTime();let t=Date.now()-this._lastUsedTime;e>0&&t>e&&this._saveStateAndStopWorker()}_getClient(){this._lastUsedTime=Date.now();const{onDidProvideCompletionItems:e,...t}=this._defaults.languageSettings;return this._client||(this._worker=this._monacoInstance.editor.createWebWorker({moduleId:"vs/language/kusto/kustoWorker",label:"kusto",createData:{languageSettings:t,languageId:"kusto"}}),this._client=this._worker.getProxy().then((e=>this._storedState?e.setSchema(this._storedState.schema).then((()=>e)):e))),this._client}getLanguageServiceWorker(...e){let t;return this._getClient().then((e=>{t=e})).then((t=>this._worker.withSyncedResources(e))).then((e=>t))}}const Fe={name:"kusto",mimeTypes:["text/kusto"],displayName:"Kusto",defaultToken:"invalid",brackets:[["[","]","delimiter.square"],["(",")","delimiter.parenthesis"]],wordDefinition:/(-?\d*\.\d\w*)|([^\`\~\!\#\%\^\&\*\(\)\-\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g,promotedOperatorCommandTokens:["where","count","extend","join","limit","order","project","project-away","project-rename","project-reorder","project-keep","render","sort","summarize","distinct","take","top","top-nested","top-hitters","union","mv-expand","mv-apply","reduce","evaluate","parse","parse-where","parse-kv","sample","sample-distinct","make-series","getschema","serialize","invoke","as","scan"],operatorCommandTokens:["filter","fork","facet","range","consume","find","search","print","partition","lookup","where","count","extend","join","limit","order","project","project-away","project-rename","project-reorder","project-keep","render","sort","summarize","distinct","take","top","top-nested","top-hitters","union","mv-expand","mv-apply","reduce","evaluate","parse","parse-where","parse-kv","sample","sample-distinct","make-series","getschema","serialize","invoke","as","scan"],keywords:["by","on","contains","notcontains","containscs","notcontainscs","startswith","has","matches","regex","true","false","and","or","typeof","int","string","date","datetime","time","long","real","​boolean","bool"],operators:["+","-","*","/",">","<","==","<>","<=",">=","~","!~"],builtinFunctions:["countof","bin","extentid","extract","extractjson","floor","iif","isnull","isnotnull","notnull","isempty","isnotempty","notempty","now","re2","strcat","strlen","toupper","tostring","count","cnt","sum","min","max","avg"],tokenizer:{root:[{include:"@whitespace"},{include:"@numbers"},{include:"@strings"},{include:"@dqstrings"},{include:"@literals"},{include:"@comments"},[/[;,.]/,"delimiter"],[/[()\[\]]/,"@brackets"],[/[<>=!%&+\-*/|~^]/,"operator"],[/[\w@#\-$]+/,{cases:{"@keywords":"keyword","@promotedOperatorCommandTokens":"operator.sql","@operatorCommandTokens":"keyword","@operators":"operator","@builtinFunctions":"predefined","@default":"identifier"}}]],whitespace:[[/\s+/,"white"]],comments:[["\\/\\/+.*","comment"]],numbers:[[/0[xX][0-9a-fA-F]*/,"number"],[/[$][+-]*\d*(\.\d*)?/,"number"],[/((\d+(\.\d*)?)|(\.\d+))([eE][\-+]?\d+)?/,"number"]],strings:[[/H'/,{token:"string.quote",bracket:"@open",next:"@string"}],[/h'/,{token:"string.quote",bracket:"@open",next:"@string"}],[/'/,{token:"string.quote",bracket:"@open",next:"@string"}]],string:[[/[^']+/,"string"],[/''/,"string"],[/'/,{token:"string.quote",bracket:"@close",next:"@pop"}]],dqstrings:[[/H"/,{token:"string.quote",bracket:"@open",next:"@dqstring"}],[/h"/,{token:"string.quote",bracket:"@open",next:"@dqstring"}],[/"/,{token:"string.quote",bracket:"@open",next:"@dqstring"}]],dqstring:[[/[^"]+/,"string"],[/""/,"string"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]],literals:[[/datetime\(\d{4}-\d{2}-\d{2}(\s+\d{2}:\d{2}(:\d{2}(\.\d{0,3})?)?)?\)/,"number"],[/time\((\d+(s(ec(onds?)?)?|m(in(utes?)?)?|h(ours?)?|d(ays?)?)|(\s*(('[^']+')|("[^"]+"))\s*))\)/,"number"],[/guid\([\da-fA-F]{8}-[\da-fA-F]{4}-[\da-fA-F]{4}-[\da-fA-F]{4}-[\da-fA-F]{12}\)/,"number"],[/typeof\((int|string|date|datetime|time|long|real|boolean|bool)\)/,"number"]]}};class Ne{_disposables=[];_contentListener=Object.create(null);_configurationListener=Object.create(null);_schemaListener=Object.create(null);_cursorListener=Object.create(null);_debouncedValidations=Object.create(null);constructor(e,t,n,r,i){this._monacoInstance=e,this._languageId=t,this._worker=n,this.defaults=r;const o=e=>{let t=e.getLanguageId();const n=e.uri.toString();if(t!==this._languageId)return;const r=this.getOrCreateDebouncedValidation(e,t);this._contentListener[n]=e.onDidChangeContent((e=>{const t=Re(e);r(t)})),this._configurationListener[n]=this.defaults.onDidChange((()=>{self.setTimeout((()=>this._doValidate(e,t,[])),0)})),this._schemaListener[n]=i((()=>{self.setTimeout((()=>this._doValidate(e,t,[])),0)}))},s=e=>{const t=e.getId();this._cursorListener[t]||(e.onDidDispose((()=>{this._cursorListener[t]?.dispose(),delete this._cursorListener[t]})),this._cursorListener[t]=e.onDidChangeCursorSelection((t=>{const n=e.getModel(),r=n.getLanguageId();if(r!==this._languageId)return;const i=n.getOffsetAt(t.selection.getPosition());this.getOrCreateDebouncedValidation(n,r)([{start:i,end:i}])})))},a=e=>{this._monacoInstance.editor.setModelMarkers(e,this._languageId,[]);let t=e.uri.toString(),n=this._contentListener[t];n&&(n.dispose(),delete this._contentListener[t]);let r=this._configurationListener[t];r&&(r.dispose(),delete this._configurationListener[t]);let i=this._schemaListener[t];i&&(i.dispose(),delete this._schemaListener[t]);let o=this._debouncedValidations[t];o&&(o.cancel(),delete this._debouncedValidations[t])};this.defaults.languageSettings.enableQuickFixes&&this._disposables.push(L.languages.registerCodeActionProvider(this._languageId,{provideCodeActions:async(e,t,n,r)=>{const i=e.getOffsetAt(t.getStartPosition()),o=e.getOffsetAt(t.getEndPosition()),s=n.markers.length>0;return{actions:await this.getMonacoCodeActions(e,i,o,s),dispose:()=>{}}}})),this._disposables.push(this._monacoInstance.editor.onDidCreateEditor(s)),this._disposables.push(this._monacoInstance.editor.onDidCreateModel(o)),this._disposables.push(this._monacoInstance.editor.onWillDisposeModel(a)),this._disposables.push(this._monacoInstance.editor.onDidChangeModelLanguage((e=>{a(e.model),o(e.model)}))),this._disposables.push({dispose:()=>{for(let e in this._contentListener)this._contentListener[e].dispose();for(let e in this._cursorListener)this._cursorListener[e].dispose();for(let e in this._debouncedValidations)this._debouncedValidations[e].cancel()}}),this._monacoInstance.editor.getModels().forEach(o),this._monacoInstance.editor.getEditors().forEach(s)}async getMonacoCodeActions(e,t,n,r){const i=[],o=await this._worker(e.uri),s=e.uri,a=await o.getResultActions(s.toString(),t,n);for(let t=0;t<a.length;t++){const n=a[t];if(n.kind.includes("Extract Function"))continue;const o=this.defaults.languageSettings.quickFixCodeActions?.find((e=>n.kind.includes(e)))?"quickfix":"custom";if("quickfix"===o&&!r)return;const s=n.changes.map((t=>{const n=e.getPositionAt(t.start),r=e.getPositionAt(t.start+t.deleteLength);return{resource:e.uri,textEdit:{range:{startLineNumber:n.lineNumber,startColumn:n.column,endLineNumber:r.lineNumber,endColumn:r.column},text:t.insertText??""}}}));i.push({title:n.title,diagnostics:[],kind:o,edit:{edits:[...s]}})}return i}getOrCreateDebouncedValidation(e,t){const n=e.uri.toString();return this._debouncedValidations[n]||(this._debouncedValidations[n]=Oe((n=>this._doValidate(e,t,n)),500)),this._debouncedValidations[n]}dispose(){this._disposables.forEach((e=>e&&e.dispose())),this._disposables=[]}_doValidate(e,t,n){if(e.isDisposed())return;const r=e.uri,i=e.getVersionId();this._worker(r).then((e=>e.doValidation(r.toString(),n))).then((e=>{if(this._monacoInstance.editor.getModel(r).getVersionId()!==i)return;const n=e.map((e=>function(e,t){let n="number"==typeof t.code?String(t.code):t.code;return{severity:Ve(t.severity),startLineNumber:t.range.start.line+1,startColumn:t.range.start.character+1,endLineNumber:t.range.end.line+1,endColumn:t.range.end.character+1,message:t.message,code:n,source:t.source}}(0,e)));let o=this._monacoInstance.editor.getModel(r),s=o.getAllDecorations().filter((e=>"squiggly-error"==e.options.className)).map((e=>e.id));if(o&&o.getLanguageId()===t){const e=this.defaults.languageSettings.syntaxErrorAsMarkDown;if(e&&e.enableSyntaxErrorAsMarkDown){const i=e.header?`**${e.header}** \n\n`:"",a=`${e.icon?`![](${e.icon})`:""} ${i}`,c=n.map((e=>({range:{startLineNumber:e.startLineNumber,startColumn:e.startColumn,endLineNumber:e.endLineNumber,endColumn:e.endColumn},options:{hoverMessage:{value:a+e.message},className:"squiggly-error",zIndex:100,overviewRuler:{color:"rgb(255, 18, 18, 0.7)",position:L.editor.OverviewRulerLane.Right},minimap:{color:"rgb(255, 18, 18, 0.7)",position:L.editor.MinimapPosition.Inline}}}))),u=L.editor.getModelMarkers({owner:t,resource:r});u&&u.length>0&&(s=[],this._monacoInstance.editor.setModelMarkers(o,t,[])),o.deltaDecorations(s,c)}else o.deltaDecorations(s,[]),this._monacoInstance.editor.setModelMarkers(o,t,n)}})).then(void 0,(e=>{console.error(e)}))}}function Re(e){return e.changes.map((e=>({start:e.rangeOffset,end:e.rangeOffset+e.text.length})))}function Ve(e){switch(e){case p.Error:return L.MarkerSeverity.Error;case p.Warning:return L.MarkerSeverity.Warning;case p.Information:return L.MarkerSeverity.Info;case p.Hint:return L.MarkerSeverity.Hint;default:return L.MarkerSeverity.Info}}const ze={PlainText:0,Comment:1,Punctuation:2,Directive:3,Literal:4,StringLiteral:5,Type:6,Column:7,Table:8,Database:9,Function:10,Parameter:11,Variable:12,Identifier:13,ClientParameter:14,QueryParameter:15,ScalarOperator:16,MathOperator:17,QueryOperator:18,Command:19,Keyword:20,MaterializedView:21,SchemaMember:22,SignatureParameter:23,Option:24},We={};for(const[e,t]of Object.entries(ze))We[t]=e;const Ue={Column:"C71585",Comment:"008000",Database:"C71585",Function:"0000FF",Identifier:"000000",Keyword:"0000FF",Literal:"B22222",ScalarOperator:"0000FF",MaterializedView:"C71585",MathOperator:"000000",Command:"0000FF",Parameter:"2B91AF",PlainText:"000000",Punctuation:"000000",QueryOperator:"CC3700",QueryParameter:"CC3700",StringLiteral:"B22222",Table:"C71585",Type:"0000FF",Variable:"191970",Directive:"9400D3",ClientParameter:"b5cea8",SchemaMember:"C71585",SignatureParameter:"2B91AF",Option:"000000"},qe={Column:"4ec9b0",Comment:"6A9B34",Database:"c586c0",Function:"dcdcaa",Identifier:"d4d4d4",Keyword:"569cd6",Literal:"ce9178",ScalarOperator:"569cd6",MaterializedView:"c586c0",MathOperator:"d4d4d4",Command:"d4d4d4",Parameter:"2B91AF",PlainText:"d4d4d4",Punctuation:"d4d4d4",QueryOperator:"9cdcfe",QueryParameter:"9cdcfe",StringLiteral:"ce9178",Table:"c586c0",Type:"569cd6",Variable:"d7ba7d",Directive:"b5cea8",ClientParameter:"b5cea8",SchemaMember:"4ec9b0",SignatureParameter:"2B91AF",Option:"d4d4d4"};class $e{_disposables=[];_contentListener=Object.create(null);_configurationListener=Object.create(null);_schemaListener=Object.create(null);decorations=[];constructor(e,t,n,r,i){this._monacoInstance=e,this._languageId=t,this._worker=n,function(){const e=document.getElementsByTagName("head")[0];var t=document.createElement("style");t.type="text/css",t.media="screen",e.appendChild(t),t.innerHTML=Object.keys(ze).map((e=>({classification:e,colorLight:Ue[e],colorDark:qe[e]}))).map((e=>`.vs .${e.classification} {color: #${e.colorLight};} .vs-dark .${e.classification} {color: #${e.colorDark};}`)).join("\n")}();const o=e=>{let t=e.getLanguageId();if(t!==this._languageId)return;const n=Oe((n=>this._doColorization(e,t,n)),500);this._contentListener[e.uri.toString()]=e.onDidChangeContent((e=>{const t=Re(e);n(t)})),this._configurationListener[e.uri.toString()]=r.onDidChange((()=>{self.setTimeout((()=>this._doColorization(e,t,[])),0)})),this._schemaListener[e.uri.toString()]=i((()=>{self.setTimeout((()=>this._doColorization(e,t,[])),0)}))},s=e=>{e.deltaDecorations(this.decorations,[]);let t=e.uri.toString(),n=this._contentListener[t];n&&(n.dispose(),delete this._contentListener[t]);let r=this._configurationListener[t];r&&(r.dispose(),delete this._configurationListener[t]);let i=this._configurationListener[t];i&&(i.dispose(),delete this._schemaListener[t])};this._disposables.push(this._monacoInstance.editor.onDidCreateModel(o)),this._disposables.push(this._monacoInstance.editor.onWillDisposeModel(s)),this._disposables.push(this._monacoInstance.editor.onDidChangeModelLanguage((e=>{s(e.model),o(e.model)}))),this._disposables.push({dispose:()=>{for(let e in this._contentListener)this._contentListener[e].dispose()}}),this._monacoInstance.editor.getModels().forEach(o)}dispose(){this._disposables.forEach((e=>e&&e.dispose())),this._disposables=[]}_rangeDoesNotIntersectAny(e,t){return t.every((t=>e.startLineNumber>t.lastImpactedLine||e.endLineNumber<t.firstImpactedLine))}_doColorization(e,t,n){if(e.isDisposed())return;const r=e.uri,i=e.getVersionId();this._worker(r).then((e=>e.doColorization(r.toString(),n))).then((n=>{if(this._monacoInstance.editor.getModel(e.uri).getVersionId()!==i)return;const r=n.map((t=>{const n=t.classifications.map((t=>function(e,t){const n=e.getPositionAt(t.start),r=e.getPositionAt(t.start+t.length);return{range:new L.Range(n.lineNumber,n.column,r.lineNumber,r.column),options:{inlineClassName:We[t.kind],stickiness:L.editor.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges}}}(e,t))).filter((e=>"PlainText"!==e.options.inlineClassName&&"Identifier"!=e.options.inlineClassName)),r=e.getPositionAt(t.absoluteStart).lineNumber,i=e.getPositionAt(t.absoluteEnd);return{decorations:n,firstImpactedLine:r,lastImpactedLine:1==i.column&&i.lineNumber>1?i.lineNumber-1:i.lineNumber}})),o=r.map((t=>e.getLinesDecorations(t.firstImpactedLine,t.lastImpactedLine).filter((e=>Ue[e.options.inlineClassName])).map((e=>e.id)))).reduce(((e,t)=>e.concat(t)),[]),s=r.reduce(((e,t)=>e.concat(t.decorations)),[]);e&&e.getLanguageId()===t&&(this.decorations=e.deltaDecorations(o,s))})).then(void 0,(e=>{console.error(e)}))}}function Ke(e){if(e)return{character:e.column-1,line:e.lineNumber-1}}function Be(e){if(e)return new L.Range(e.start.line+1,e.start.character+1,e.end.line+1,e.end.character+1)}function He(e){let t=L.languages.CompletionItemKind;switch(e){case F.Text:return t.Text;case F.Method:return t.Method;case F.Function:return t.Function;case F.Constructor:return t.Constructor;case F.Field:return t.Field;case F.Variable:return t.Variable;case F.Class:return t.Class;case F.Interface:return t.Interface;case F.Module:return t.Module;case F.Property:return t.Property;case F.Unit:return t.Unit;case F.Value:return t.Value;case F.Enum:return t.Enum;case F.Keyword:return t.Keyword;case F.Snippet:return t.Snippet;case F.Color:return t.Color;case F.File:return t.File;case F.Reference:return t.Reference}return t.Property}function Qe(e){if(e)return{range:Be(e.range),text:e.newText}}const Xe="https://learn.microsoft.com/azure/data-explorer/kusto/query";class Ge{constructor(e,t){this._worker=e,this.languageSettings=t}get triggerCharacters(){return[" "]}provideCompletionItems(e,t,n,r){const i=e.getWordUntilPosition(t),o=new L.Range(t.lineNumber,i.startColumn,t.lineNumber,i.endColumn),s=e.uri,a=this.languageSettings.onDidProvideCompletionItems;return this._worker(s).then((e=>e.doComplete(s.toString(),Ke(t)))).then((e=>a?a(e):e)).then((e=>{if(!e)return;let t=e.items.map((e=>{let t={label:e.label,insertText:e.insertText,sortText:e.sortText,filterText:e.filterText,documentation:this.formatDocLink(e.documentation?.value),detail:e.detail,range:o,kind:He(e.kind)};return e.textEdit&&(t.range=Be(e.textEdit.range),t.insertText=e.textEdit.newText),e.insertTextFormat===N.Snippet&&(t.insertTextRules=L.languages.CompletionItemInsertTextRule.InsertAsSnippet),t}));return{isIncomplete:e.isIncomplete,suggestions:t}}))}formatDocLink(e){if(!e)return;const{documentationBaseUrl:t=Xe,documentationSuffix:n}=this.languageSettings;return{value:e,isTrusted:!0,uris:new Proxy({},{get(e,r,i){let o=r.toString().replace(".md","");o.startsWith("https")||(o=`${t}/${o}`);const s=L.Uri.parse(o);return n&&(s.toString=()=>o+n),s}})}}}function Je(e){return"string"==typeof e?{value:e}:(t=e)&&"object"==typeof t&&"string"==typeof t.kind?"plaintext"===e.kind?{value:e.value.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}:{value:e.value}:{value:"```"+e.value+"\n"+e.value+"\n```\n"};var t}function Ye(e){if(e)return Array.isArray(e)?e.map(Je):[Je(e)]}function Ze(e){return{uri:L.Uri.parse(e.uri),range:Be(e.range)}}class et{constructor(e){this._worker=e}provideDefinition(e,t,n){const r=e.uri;return this._worker(r).then((e=>e.findDefinition(r.toString(),Ke(t)))).then((e=>{if(e&&0!=e.length)return[Ze(e[0])]}))}}class tt{constructor(e){this._worker=e}provideReferences(e,t,n,r){const i=e.uri;return this._worker(i).then((e=>e.findReferences(i.toString(),Ke(t)))).then((e=>{if(e)return e.map(Ze)}))}}class nt{constructor(e){this._worker=e}provideRenameEdits(e,t,n,r){const i=e.uri;return this._worker(i).then((e=>e.doRename(i.toString(),Ke(t),n))).then((e=>function(e){if(!e||!e.changes)return;let t=[];for(let n in e.changes){const r=L.Uri.parse(n);for(let i of e.changes[n])t.push({resource:r,textEdit:{range:Be(i.range),text:i.newText},versionId:void 0})}return{edits:t}}(e)))}}class rt{constructor(e){this._worker=e}provideDocumentFormattingEdits(e,t,n){const r=e.uri;return this._worker(r).then((e=>e.doDocumentFormat(r.toString()).then((e=>e.map((e=>Qe(e)))))))}}class it{constructor(e){this._worker=e}provideDocumentRangeFormattingEdits(e,t,n,r){const i=e.uri;return this._worker(i).then((e=>e.doRangeFormat(i.toString(),function(e){if(e)return{start:Ke(e.getStartPosition()),end:Ke(e.getEndPosition())}}(t)).then((e=>e.map((e=>Qe(e)))))))}}class ot{constructor(e){this._worker=e}provideFoldingRanges(e,t,n){const r=e.uri;return this._worker(r).then((e=>e.doFolding(r.toString()).then((e=>e.map((e=>function(e){return{start:e.startLine+1,end:e.endLine+1,kind:L.languages.FoldingRangeKind.Region}}(e)))))))}}class st{constructor(e){this._worker=e}provideHover(e,t,n){let r=e.uri;return this._worker(r).then((e=>e.doHover(r.toString(),Ke(t)))).then((e=>{if(e)return{range:Be(e.range),contents:Ye(e.contents)}}))}}let at,ct,ut=new Promise(((e,t)=>{ct=e}));function dt(e,t){let n,r=new L.Emitter,i=[];const o=new je(t,e);i.push(o);const s=(e,...t)=>{const n=async(e,t)=>{const n=t.setSchema(e);await n.then((()=>{r.fire(e)}))};return o.getLanguageServiceWorker(...[e].concat(t)).then((e=>({...e,setSchema:t=>n(t,e),async setSchemaFromShowSchema(t,r,i,o,s){await e.normalizeSchema(t,r,i).then((t=>{(o||s)&&(t={...t,globalScalarParameters:o,globalTabularParameters:s}),n(t,e)}))}})))},a="kusto";return i.push(t.languages.registerCompletionItemProvider(a,new Ge(s,e.languageSettings))),e.languageSettings.useTokenColorization&&(n=t.languages.setMonarchTokensProvider(a,Fe)),e.onDidChange((e=>{e.languageSettings.useTokenColorization||void 0===n||(n.dispose(),n=void 0),e.languageSettings.useTokenColorization&&null==n&&(n=t.languages.setMonarchTokensProvider(a,Fe))})),i.push(new Ne(t,a,s,e,r.event)),i.push(new $e(t,a,s,e,r.event)),i.push(t.languages.registerDocumentRangeFormattingEditProvider(a,new it(s))),i.push(t.languages.registerFoldingRangeProvider(a,new ot(s))),i.push(t.languages.registerDefinitionProvider(a,new et(s))),i.push(t.languages.registerRenameProvider(a,new nt(s))),i.push(t.languages.registerReferenceProvider(a,new tt(s))),e.languageSettings.enableHover&&i.push(t.languages.registerHoverProvider(a,new st(s))),t.languages.registerDocumentFormattingEditProvider(a,new rt(s)),at=s,ct(s),t.languages.setLanguageConfiguration(a,{folding:{offSide:!1,markers:{start:/^\s*[\r\n]/gm,end:/^\s*[\r\n]/gm}},comments:{lineComment:"//",blockComment:null}}),at}function lt(){return ut.then((()=>at))}}}]);
//# sourceMappingURL=785.js.map